<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Dakotah Lambert" />
  <title>The Semilattice Row</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">The Semilattice Row</h1>
<p class="author">Dakotah Lambert</p>
</header>
<h2 id="review">Review:</h2>
<p>In previous sessions, weâ€™ve discussed the regular and star-free classes at the top of our finite-strucure hierarchy, and the trivial languages (ğŸ) and extensions thereof at the bottom.</p>
<h2 id="varieties">Varieties:</h2>
<p>A variety ğ• of semigroups (or monoids) is a collection satisfying the following:</p>
<ul>
<li>ğ• is closed under taking products: if ğ€âˆˆğ• and ğâˆˆğ•, then ğ€Ã—ğâˆˆğ•</li>
<li>ğ• is closed under taking subsemigroups (or submonoids)</li>
<li>ğ• is closed under quotients</li>
</ul>
<p>These properties mean that any class of languages defined by having their syntactic monoids belong to some variety ğ• must necessarily be closed under the Boolean operations. The union and intersection are computed by</p>
<ol type="1">
<li>Finding the product of the state machines recognizing them (i.e.Â of their syntactic monoids),</li>
<li>Finding the submonoid reachable from the start state, then</li>
<li>Computing the quotient of the result over the Myhill relation.</li>
</ol>
<p>The first step produces some automaton, the second removes unreachable states, and the third merges those that remain to give us something minimal again. Using the Nerode relation instead of the Myhill relation would yield a canonical DFA, but that might not be a monoid.</p>
<p>So this gives us closure under union and intersection. The fact that a language and its complement share the same monoid gives us closure under complementation. Thatâ€™s all of the Boolean operations.</p>
<h2 id="semilattices-a.k.a.-commutative-bands">Semilattices (a.k.a. Commutative Bands)</h2>
<p>If you have a class of languages and you add restrictions, you get a subclass. Or if you remove restrictions, you get a superclass. Recall that a monoid is in ğŸ iff it has just a single element, denoted 1. Thereâ€™s only one such monoid, corresponding to two languages: Î£* and âˆ…. This monoid has the following properties:</p>
<ul>
<li>Itâ€™s commutative: ğ‘â¢ğ‘=ğ‘â¢ğ‘ for all ğ‘ and ğ‘ (both can only be 1)</li>
<li>Itâ€™s idempotent: ğ‘â¢ğ‘=ğ‘ for all ğ‘ (ğ‘ can only be 1)</li>
<li>It has inverses: for each ğ‘, there exists ğ‘â»Â¹ such that ğ‘â¢ğ‘â»Â¹=ğ‘â»Â¹â¢ğ‘=1 (both ğ‘ and its inverse are 1)</li>
<li>Itâ€™s null: there exists an element 0 where ğ‘â¢ğ‘=ğ‘â¢ğ‘=0 (here, 0=1)</li>
</ul>
<p>The class ğ‹ğŸ is a superclass of ğŸ because rather than requiring the whole monoid to be in ğŸ, we only require its local subsemigroups ğ‘’â¢ğ‘†â¢ğ‘’ to be in ğŸ. This is a relaxation of some properties. But we might also just decide to remove some from the above list. If we keep only the <strong>commutative</strong> and <strong>idempotent</strong> properties, we have a semilattice! Thatâ€™s not a profound theorem or anything by the way, just the definition of what a semilattice is.</p>
<p>Here is a sample language whose monoid is a semilattice: <br /> <img src="./na-or-nb-or-c.svg" alt="A state machine with five states, numbered 1 through 5. The start state is 1, and all states but 5 are accepting. State 1 has transitions to 4, 2, and 3 on a, b, and c respectively. State 2 has transitions to 5, 2, and 3 on a, b, and c respectively. State 3 is a sink. State 4 has transitions to 4, 5, and 3 on a, b, and c respectively. And state 5 has self-loops on a and b, and transitions to 3 on c." /> <br /> Its syntactic monoid is actually the same shape: <br /> <img src="./na-or-nb-or-c-mon.svg" alt="The preceding state machine, where states 1 through 5 have been relabeled as empty string, a, c, b, and ba, respectively." /></p>
<table>
<thead>
<tr class="header">
<th style="text-align: right;">â‹…</th>
<th style="text-align: right;">Î»</th>
<th style="text-align: right;">a</th>
<th style="text-align: right;">b</th>
<th style="text-align: right;">ba</th>
<th style="text-align: right;">c</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">Î»</td>
<td style="text-align: right;">Î»</td>
<td style="text-align: right;">a</td>
<td style="text-align: right;">b</td>
<td style="text-align: right;">ba</td>
<td style="text-align: right;">c</td>
</tr>
<tr class="even">
<td style="text-align: right;">a</td>
<td style="text-align: right;">a</td>
<td style="text-align: right;">a</td>
<td style="text-align: right;">ba</td>
<td style="text-align: right;">ba</td>
<td style="text-align: right;">c</td>
</tr>
<tr class="odd">
<td style="text-align: right;">b</td>
<td style="text-align: right;">b</td>
<td style="text-align: right;">ba</td>
<td style="text-align: right;">b</td>
<td style="text-align: right;">ba</td>
<td style="text-align: right;">c</td>
</tr>
<tr class="even">
<td style="text-align: right;">ba</td>
<td style="text-align: right;">ba</td>
<td style="text-align: right;">ba</td>
<td style="text-align: right;">ba</td>
<td style="text-align: right;">ba</td>
<td style="text-align: right;">c</td>
</tr>
<tr class="odd">
<td style="text-align: right;">c</td>
<td style="text-align: right;">c</td>
<td style="text-align: right;">c</td>
<td style="text-align: right;">c</td>
<td style="text-align: right;">c</td>
<td style="text-align: right;">c</td>
</tr>
</tbody>
</table>
<p>Inspecting the main diagonal, each element is idempotent. But also, this main diagonal is a mirror; the monoid is commutative. Commutative and idempotent, itâ€™s a semilattice.</p>
<p>What does it <em>mean</em> for a language to be commutative and idempotent? Consider two words: â€œabacabâ€ and â€œbacbaâ€.</p>
<ul>
<li>By commutativity, we can swap adjacent letters</li>
<li>Iterating this, âŸ¦abacabâŸ§ = âŸ¦aaabbcâŸ§ and âŸ¦bacbaâŸ§ = âŸ¦aabbcâŸ§</li>
<li>All elements are idempotent, ğ‘¥â¢ğ‘¥=ğ‘¥.</li>
<li>So we can replicate letters as needed</li>
<li>âŸ¦aabbcâŸ§ = âŸ¦aaabbcâŸ§,</li>
<li>So âŸ¦bacbaâŸ§=âŸ¦abacabâŸ§ â€” they must be treated identically</li>
<li>This generalizes!</li>
<li>ğ¿ is a semilattice language (ğ‚ğ, for â€œcommutative bandâ€) iff words are treated identically whenever they contain the same set of letters.</li>
<li>This is locally testable or piecewise testable for a factor width of ğ‘˜=1.</li>
</ul>
<h2 id="extensions">Extensions</h2>
<p>Semilattices form a variety. So we can construct a â€œlocally-â€ extension and a tier-based extension of that. â€œLocally a semilatticeâ€ turns out to be the same as â€œlocally testableâ€, so weâ€™ll denote it as such: LT.</p>
<p>This is the DFA for the language in which all words contain â€œabâ€: <br /> <img src="./ab.svg" alt="A DFA of three states, labeled 1 through 3. State 1 transitions to 2 on a, and has self-loops on b and c. State 2 transitions to 2, 3, or 1 on a, b, or c, respectively. State 3 is a sink, as well as being the only accepting state." /> <br /> Its syntactic monoid is as follows: <br /> <img src="./ab-mon.svg" alt="The syntactic monoid of the preceding DFA. There are six states: empty string, a, b, c, ab, and ba. The Cayley table is given below." /></p>
<table>
<thead>
<tr class="header">
<th style="text-align: right;">â‹…</th>
<th style="text-align: right;">Î»</th>
<th style="text-align: right;">a</th>
<th style="text-align: right;">b</th>
<th style="text-align: right;">c</th>
<th style="text-align: right;">ba</th>
<th style="text-align: right;">ab</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">Î»</td>
<td style="text-align: right;">Î»</td>
<td style="text-align: right;">a</td>
<td style="text-align: right;">b</td>
<td style="text-align: right;">c</td>
<td style="text-align: right;">ba</td>
<td style="text-align: right;">ab</td>
</tr>
<tr class="even">
<td style="text-align: right;">a</td>
<td style="text-align: right;">a</td>
<td style="text-align: right;">a</td>
<td style="text-align: right;">ab</td>
<td style="text-align: right;">c</td>
<td style="text-align: right;">a</td>
<td style="text-align: right;">ab</td>
</tr>
<tr class="odd">
<td style="text-align: right;">b</td>
<td style="text-align: right;">b</td>
<td style="text-align: right;">ba</td>
<td style="text-align: right;">b</td>
<td style="text-align: right;">b</td>
<td style="text-align: right;">ba</td>
<td style="text-align: right;">ab</td>
</tr>
<tr class="even">
<td style="text-align: right;">c</td>
<td style="text-align: right;">c</td>
<td style="text-align: right;">a</td>
<td style="text-align: right;">c</td>
<td style="text-align: right;">c</td>
<td style="text-align: right;">a</td>
<td style="text-align: right;">ab</td>
</tr>
<tr class="odd">
<td style="text-align: right;">ba</td>
<td style="text-align: right;">ba</td>
<td style="text-align: right;">ba</td>
<td style="text-align: right;">ab</td>
<td style="text-align: right;">b</td>
<td style="text-align: right;">ab</td>
<td style="text-align: right;">ab</td>
</tr>
<tr class="even">
<td style="text-align: right;">ab</td>
<td style="text-align: right;">ab</td>
<td style="text-align: right;">ab</td>
<td style="text-align: right;">ab</td>
<td style="text-align: right;">ab</td>
<td style="text-align: right;">ab</td>
<td style="text-align: right;">ab</td>
</tr>
</tbody>
</table>
<p>Notice that âŸ¦baâŸ§ is not an idempotent, so this language isnâ€™t in ğ‚ğ. (It also lacks commutativity.) But letâ€™s find ğ‘’â¢ğ‘†â¢ğ‘’, remembering to exclude the empty string because we are in the semigroup and not the monoid. Recall that ğ‘’ is an idempotent, ğ‘’â¢ğ‘† is everything reachable from it in the graph, and ğ‘’â¢ğ‘†â¢ğ‘’ is the set you get when multiplying each element of ğ‘’â¢ğ‘† by ğ‘’:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">ğ‘’</th>
<th style="text-align: center;">ğ‘’â¢ğ‘†</th>
<th style="text-align: center;">ğ‘’â¢ğ‘†â¢ğ‘’</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">a</td>
<td style="text-align: center;">{a, c, ab}</td>
<td style="text-align: center;">{a, ab}</td>
</tr>
<tr class="even">
<td style="text-align: center;">b</td>
<td style="text-align: center;">{b, ba, ab}</td>
<td style="text-align: center;">{b, ab}</td>
</tr>
<tr class="odd">
<td style="text-align: center;">c</td>
<td style="text-align: center;">{a, c, ab}</td>
<td style="text-align: center;">{c, ab}</td>
</tr>
<tr class="even">
<td style="text-align: center;">ab</td>
<td style="text-align: center;">{ab}</td>
<td style="text-align: center;">{ab}</td>
</tr>
</tbody>
</table>
<ul>
<li>As noted, ğ‘€ isnâ€™t idempotent or commutatitve, so the language isnâ€™t in ğ‚ğ</li>
<li>The ğ‘’â¢ğ‘†â¢ğ‘’ arenâ€™t singleton, so the language isnâ€™t Generalized Definite (ğ‹ğŸ)</li>
<li>But each ğ‘’â¢ğ‘†â¢ğ‘’ is itself in ğ‚ğ (try it, test the properties)</li>
<li>The language is locally a semilattice â€” itâ€™s LT</li>
</ul>
<p>And of course if we draw in self-loops everywhere on some new symbol d, then we have something tier-based locally testable, TLT.</p>
<h2 id="summary">Summary</h2>
<p>For any given variety ğ•, there is a corresponding â€œlocallyâ€ class ğ‹ğ• and a tier-based extension of that, ğ“ğ‹ğ•. The ğ‹ğ• is also a variety, but ğ“ğ‹ğ• is not, as the latter is not closed under products. In the table below, inclusions hold downward and leftward.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">ğ•</th>
<th style="text-align: center;">ğ‹ğ•</th>
<th style="text-align: center;">ğ“ğ‹ğ•</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Reg</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;">SF</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;">ğ‚ğ</td>
<td style="text-align: center;">LT</td>
<td style="text-align: center;">TLT</td>
</tr>
<tr class="even">
<td style="text-align: center;">ğŸ</td>
<td style="text-align: center;">GD</td>
<td style="text-align: center;">TGD</td>
</tr>
</tbody>
</table>
<p>If we havenâ€™t mentioned it yet, the variety of finite monoids (what regular languages are) is called ğ…ğ¢ğ§, and the aperiodic ones (for star-free) are ğ€ğ©. Note: there is a language class called Fin, which should not be confused with the monoid variety ğ…ğ¢ğ§.</p>
</body>
</html>
